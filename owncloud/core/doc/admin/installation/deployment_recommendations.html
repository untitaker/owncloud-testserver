<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Deployment Recommendations &mdash; ownCloud 10.0 Server Administration Manual 10.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/main.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="ownCloud 10.0 Server Administration Manual 10.0 documentation" href="../contents.html" />
    <link rel="up" title="Installation" href="index.html" />
    <link rel="next" title="Deployment Considerations" href="deployment_considerations.html" />
    <link rel="prev" title="System Requirements" href="system_requirements.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1d2d44">

  </head>
  <body role="document">


<div class="wrap container not-front">
  <div class="content row">
  <main class="main">
    <div class="row page-content-header">
      <div class="col-md-5 col-md-offset-7">
      
        <form class="headersearch" style="margin-bottom:-3px;" action="../search.html" method="get">
        <input type="text" value="" name="q" id="q" class="form-control" /> 
        <button  class="btn btn-default" type="submit" id="searchsubmit">Search</button>
        </form>
      
      </div>
    </div>
    
			<div class="row">
				<div class="col-md-3">
					<div class="sidebar">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										
<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New in ownCloud 10.0</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="system_requirements.html">System Requirements</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Deployment Recommendations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-recommendations">General Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-small-workgroups-or-departments">For Small Workgroups or Departments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-mid-sized-enterprises">For Mid-sized Enterprises</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-large-enterprises-and-service-providers">For Large Enterprises and Service Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deployment_considerations.html">Deployment Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux_installation.html">Preferred Installation Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="source_installation.html">Manual Installation on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_wizard.html">The Installation Wizard</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line_installation.html">Command Line Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_notes_and_tips.html">Configuration Notes &amp; Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="changing_the_web_route.html">Changing Your ownCloud URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps_management_installation.html">Installing and Managing Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps_supported.html">Supported Apps in ownCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="selinux_configuration.html">SELinux Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="nginx_configuration.html">NGINX Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appliance/index.html">The ownCloud X Appliance</a></li>
</ul>

								</ul>
							</div>
					</div>
				</div>
        

				<div class="col-md-9">
					<div class="page-content">
            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="system_requirements.html" title="Previous Chapter: System Requirements"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; System Requir...</span>
    </a>
  </li>
  <li class="next">
    <a href="deployment_considerations.html" title="Next Chapter: Deployment Considerations"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Deployment Co... &raquo;</span>
    </a>
  </li>
</ul>
						
  <div class="section" id="deployment-recommendations">
<h1>Deployment Recommendations<a class="headerlink" href="#deployment-recommendations" title="Permalink to this headline">¶</a></h1>
<p>What is the best way to install and maintain ownCloud?
It depends.
Why?
Because every ownCloud customer has their own particular needs and IT infrastructure.
ownCloud and the LAMP stack are highly-configurable.
In this document, we present three typical scenarios and make best-practice recommendations for both software and hardware.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recommendations put forward here are based on a standard ownCloud installation, one without any particular apps, themes, or code changes. But, server load is dependent upon on the number of clients, files, user activity, as well as other usage patterns. Given that, these recommendations are only a rule of thumb based on our experience, as well as that of one of our customers.</p>
</div>
<div class="section" id="general-recommendations">
<h2>General Recommendations<a class="headerlink" href="#general-recommendations" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whatever the size of your organization, always keep one thing in mind: the amount of data stored in ownCloud will only grow. Plan ahead.</p>
</div>
<p>Consider setting up a scale-out deployment, or using Federated Cloud Sharing to keep individual ownCloud instances to a manageable size.</p>
<ul class="simple">
<li>Operating system: Linux.</li>
<li>Web server: Apache 2.4.</li>
<li>Database: MySQL/MariaDB with InnoDB storage engine (MyISAM is not supported, see: <a class="reference internal" href="../configuration/database/linux_database_configuration.html#db-storage-engine-label"><span>MySQL / MariaDB storage engine</span></a>)</li>
<li>PHP 5.6+.</li>
</ul>
</div>
<div class="section" id="for-small-workgroups-or-departments">
<h2>For Small Workgroups or Departments<a class="headerlink" href="#for-small-workgroups-or-departments" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Number of users</dt>
<dd><p class="first last">Up to 150 users.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage size</dt>
<dd><p class="first last">100 GB to 10TB.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>High availability level</dt>
<dd><p class="first last">Zero-downtime backups via Btrfs snapshots, component failure, leads to interruption of service. Alternate backup scheme on other filesystems: nightly backups with service interruption.</p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="recommended-system-requirements">
<h3>Recommended System Requirements<a class="headerlink" href="#recommended-system-requirements" title="Permalink to this headline">¶</a></h3>
<p>One machine running the application server, web server, database server and local storage.</p>
<p>Authentication via an existing LDAP or Active Directory server.</p>
<div class="figure">
<img alt="Network diagram for small enterprises." src="../_images/deprecs-1.png" />
</div>
<ul>
<li><dl class="first docutils">
<dt>Components</dt>
<dd><p class="first last">One server with at least 2 CPU cores, 16GB RAM, local storage as needed.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Operating system</dt>
<dd><p class="first last">Enterprise-grade Linux distribution with full support from OS vendor. We
recommend Red Hat Enterprise Linux or SUSE Linux Enterprise Server 12.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>SSL Configuration</dt>
<dd><p class="first last">The SSL termination happens in Apache.
A standard SSL certificate is needed, installed according to the Apache documentation.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Load Balancer</dt>
<dd><p class="first last">None.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Database</dt>
<dd><p class="first last">MySQL, MariaDB or PostgreSQL. We currently recommend MySQL / MariaDB, as our customers have had good experiences when moving to a Galera cluster to scale the DB. (InnoDB storage engine, MyISAM is not supported, see: <a class="reference internal" href="../configuration/database/linux_database_configuration.html#db-storage-engine-label"><span>MySQL / MariaDB storage engine</span></a>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Backup</dt>
<dd><p class="first">Install ownCloud, ownCloud data directory and database on Btrfs filesystem. Make regular snapshots at desired intervals for zero downtime backups. Mount DB partitions with the &#8220;nodatacow&#8221; option to prevent fragmentation.</p>
<p>Alternatively, make nightly backups with service interruption:</p>
<ul class="simple">
<li>Shutdown Apache.</li>
<li>Create database dump.</li>
<li>Push data directory to backup.</li>
<li>Push database dump to backup.</li>
<li>Start Apache.</li>
</ul>
<p class="last">Then optionally rsync to a backup storage or tape backup. (See the
<a class="reference external" href="https://doc.owncloud.org/server/9.0/admin_manual/maintenance/index.html">Maintenance</a> section of the Administration manual for tips on backups and restores.)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Authentication</dt>
<dd><p class="first last">User authentication via one or several LDAP or Active Directory servers. (See <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/user/user_auth_ldap.html">User Authentication with LDAP</a> for information on configuring ownCloud to use LDAP and AD.)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Session Management</dt>
<dd><p class="first last">Local session management on the application server. PHP sessions are stored in a temporary filesystem mounted at the operating system-specific session storage location. You can find out where that is by running <code class="docutils literal"><span class="pre">grep</span> <span class="pre">-R</span> <span class="pre">'session.save_path'</span> <span class="pre">/etc/php5</span></code> and then add it to the <code class="docutils literal"><span class="pre">/etc/fstab</span></code> file, for example: <code class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;tmpfs</span> <span class="pre">/var/lib/php5/pool-www</span> <span class="pre">tmpfs</span> <span class="pre">defaults,noatime,mode=1777</span> <span class="pre">0</span> <span class="pre">0&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">/etc/fstab</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Memory Caching</dt>
<dd><p class="first last">A memory cache speeds up server performance. ownCloud supports four memory caches; refer to <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/server/caching_configuration.html">Configuring Memory Caching</a> for information on selecting and configuring a memory cache.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage</dt>
<dd><p class="first last">Local storage.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ownCloud Edition</dt>
<dd><p class="first last">Standard Edition. (See <a class="reference external" href="https://owncloud.com/owncloud-server-or-enterprise-edition/">ownCloud Server or Enterprise Edition</a> for
comparisons of the ownCloud editions.)</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="for-mid-sized-enterprises">
<h2>For Mid-sized Enterprises<a class="headerlink" href="#for-mid-sized-enterprises" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Number of users</dt>
<dd><p class="first last">150 to 1,000 users.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage size</dt>
<dd><p class="first last">Up to 200TB.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>High availability level</dt>
<dd><p class="first last">Every component is fully redundant and can fail without service interruption. Backups without service interruption</p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="id1">
<h3>Recommended System Requirements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>2 to 4 application servers.</li>
<li>A cluster of two database servers.</li>
<li>Storage on an NFS server.</li>
<li>Authentication via an existing LDAP or Active Directory server.</li>
<li>Transactional file locking via a Redis Server</li>
</ul>
<div class="figure">
<img alt="Network diagram for a mid-sized enterprise." src="../_images/deprecs-2.png" />
</div>
<ul>
<li><dl class="first docutils">
<dt>Components</dt>
<dd><ul class="first last simple">
<li>2 to 4 application servers with four sockets and 32GB RAM.</li>
<li>2 DB servers with four sockets and 64GB RAM.</li>
<li>1 HAproxy load balancer with two sockets and 16GB RAM.</li>
<li>NFS storage server as needed.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Operating system</dt>
<dd><p class="first last">Enterprise grade Linux distribution with full support from OS vendor. Red Hat Enterprise Linux or SUSE Linux Enterprise Server 12 are recommended.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>SSL Configuration</dt>
<dd><p class="first last">The SSL termination occurs in the HAProxy load balancer. A standard SSL certificate is needed, installed according to the <a class="reference external" href="http://www.haproxy.org/#docs">HAProxy documentation</a>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Load Balancer</dt>
<dd><p class="first last">HAProxy running on a dedicated server in front of the application servers. A sticky session needs to be used because of local session management on the application servers.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Database</dt>
<dd><p class="first last">MySQL/MariaDB Galera cluster with master-master replication. (InnoDB storage engine, MyISAM is not supported, see: <a class="reference internal" href="../configuration/database/linux_database_configuration.html#db-storage-engine-label"><span>MySQL / MariaDB storage engine</span></a>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Backup</dt>
<dd><p class="first">Minimum daily backup without downtime. All MySQL/MariaDB statements should be replicated to a backup MySQL/MariaDB slave instance.</p>
<blockquote class="last">
<div><ul class="simple">
<li>Create a snapshot on the NFS storage server.</li>
<li>At the same time stop the MySQL replication.</li>
<li>Create a MySQL dump of the backup slave.</li>
<li>Push the NFS snapshot to the backup.</li>
<li>Push the MySQL dump to the backup.</li>
<li>Delete the NFS snapshot.</li>
<li>Restart MySQL replication.</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Authentication</dt>
<dd><p class="first last">User authentication via one or several LDAP or Active Directory servers. (See <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/user/user_auth_ldap.html">User Authentication with LDAP</a>  for information on configuring ownCloud to use LDAP and AD.)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>LDAP</dt>
<dd><p class="first last">Read-only slaves should be deployed on every application server for optimal scalability</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Session Management</dt>
<dd><p class="first last">Session management on the application server. PHP sessions are stored in a tmpfs mounted at the operating system-specific session storage location. You can find out where that is by running <code class="docutils literal"><span class="pre">grep</span> <span class="pre">-R</span> <span class="pre">'session.save_path'</span> <span class="pre">/etc/php5</span></code> and then add it to the <code class="docutils literal"><span class="pre">/etc/fstab</span></code> file, for example: <code class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;tmpfs</span> <span class="pre">/var/lib/php5/pool-www</span> <span class="pre">tmpfs</span> <span class="pre">defaults,noatime,mode=1777</span> <span class="pre">0</span> <span class="pre">0&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">/etc/fstab</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Memory Caching</dt>
<dd><p class="first last">A memory cache speeds up server performance. ownCloud supports four memory caches; refer to <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/server/caching_configuration.html">Configuring Memory Caching</a> for information on selecting and configuring a memory cache.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage</dt>
<dd><p class="first last">Use an off-the-shelf NFS solution, such as IBM Elastic Storage or RedHat Ceph.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ownCloud Edition</dt>
<dd><p class="first last">Enterprise Edition. (See <a class="reference external" href="https://owncloud.com/owncloud-server-or-enterprise-edition/">ownCloud Server or Enterprise Edition</a> for comparisons of the ownCloud editions.)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Transactional File Locking</dt>
<dd><ul class="first last simple">
<li>It prevents concurrent processes from accessing the same files at the same time.</li>
<li>It helps prevent side effects caused by concurrent operations.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="for-large-enterprises-and-service-providers">
<h2>For Large Enterprises and Service Providers<a class="headerlink" href="#for-large-enterprises-and-service-providers" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>Number of users</dt>
<dd><p class="first last">5,000 to &gt;100,000 users.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage size</dt>
<dd><p class="first last">Up to 1 petabyte.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>High availability level</dt>
<dd><p class="first last">Every component is fully redundant and can fail without service interruption. Backups without service interruption</p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="id2">
<h3>Recommended System Requirements<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>4 to 20 application/Web servers.</p>
<p>A cluster of two or more database servers.</p>
<p>Storage is an NFS server or an object store that is S3 compatible.</p>
<p>Cloud federation for a distributed setup over several data centers.</p>
<p>Authentication via an existing LDAP or Active Directory server, or SAML.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/deprecs-3.png"><img alt="Network diagram for large enterprise." src="../_images/deprecs-3.png" style="width: 597.0px; height: 409.8px;" /></a>
</div>
<ul>
<li><dl class="first docutils">
<dt>Components</dt>
<dd><ul class="first last simple">
<li>4 to 20 application servers with four sockets and 64GB  RAM.</li>
<li>4 DB servers with four sockets and 128GB RAM</li>
<li>2 Hardware load balancer, for example, BIG IP from F5</li>
<li>NFS storage server as needed.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Operating system</dt>
<dd><p class="first last">RHEL 7 with latest service packs.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>SSL Configuration</dt>
<dd><p class="first last">The SSL termination is done in the load balancer. A standard SSL certificate is needed, installed according to the load balancer documentation.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Load Balancer</dt>
<dd><p class="first last">A redundant hardware load-balancer with heartbeat, for example, <a class="reference external" href="https://f5.com/products/big-ip/">F5 Big-IP</a>. This runs two load balancers in front of the application servers.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Database</dt>
<dd><p class="first last">MySQL/MariaDB Galera Cluster with 4x master &#8211; master replication. (InnoDB storage engine, MyISAM is not supported, see: <a class="reference internal" href="../configuration/database/linux_database_configuration.html#db-storage-engine-label"><span>MySQL / MariaDB storage engine</span></a>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Backup</dt>
<dd><p class="first">Minimum daily backup without downtime. All MySQL/MariaDB statements should be replicated to a backup MySQL/MariaDB slave instance.</p>
<blockquote class="last">
<div><ul class="simple">
<li>Create a snapshot on the NFS storage server.</li>
<li>At the same time stop the MySQL replication.</li>
<li>Create a MySQL dump of the backup slave.</li>
<li>Push the NFS snapshot to the backup.</li>
<li>Push the MySQL dump to the backup.</li>
<li>Delete the NFS snapshot.</li>
<li>Restart MySQL replication.</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Authentication</dt>
<dd><p class="first last">User authentication via one or several LDAP or Active Directory servers, or SAML/Shibboleth. (See <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/user/user_auth_ldap.html">User Authentication with LDAP</a> and <a class="reference external" href="https://doc.owncloud.org/server/9.0/admin_manual/enterprise_user_management/user_auth_shibboleth.html">Shibboleth Integration</a>.)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>LDAP</dt>
<dd><p class="first last">Read-only slaves should be deployed on every application server for optimal scalability.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Session Management</dt>
<dd><p class="first last">Redis should be used for the session management storage.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Caching</dt>
<dd><p class="first last">Redis for distributed in-memory caching (see <a class="reference external" href="https://doc.owncloud.org/server/10.0/admin_manual/configuration/server/caching_configuration.html">Configuring Memory
Caching</a>).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Storage</dt>
<dd><p class="first last">An off-the-shelf NFS solution should be used. Examples are IBM Elastic Storage or RedHat Ceph. Optionally, an S3 compatible object store can also be used.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ownCloud Edition</dt>
<dd><p class="first last">Enterprise Edition. (See <a class="reference external" href="https://owncloud.com/owncloud-server-or-enterprise-edition/">ownCloud Server or Enterprise Edition</a> for comparisons of the ownCloud editions.)</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deadlocks-when-using-mariadb-galera-cluster">
<h3>Deadlocks When Using MariaDB Galera Cluster<a class="headerlink" href="#deadlocks-when-using-mariadb-galera-cluster" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;re using <a class="reference external" href="http://galeracluster.com">MariaDB Galera Cluster</a> with your ownCloud installation, you may encounter deadlocks when you attempt to sync a large number of files.
You may also encounter database errors, such as this one:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction</span>
</pre></div>
</div>
<p>The issue, <a class="reference external" href="https://github.com/owncloud/core/issues/14757#issuecomment-223492913">identified by Michael Roth</a>, is caused when MariaDB Galera cluster sends write requests to all servers in the cluster; <a class="reference external" href="http://severalnines.com/blog/avoiding-deadlocks-galera-set-haproxy-single-node-writes-and-multi-node-reads">here is a detailed explanation</a>.
The solution is to send all write requests to a single server, instead of all of them.</p>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.severalnines.com/blog/become-mysql-dba-blog-series-database-high-availability">Database High Availability</a>
<a class="reference external" href="http://blog.bitnami.com/2014/06/performance-enhacements-for-apache-and.html">Performance enhancements for Apache and PHP</a>
<a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-redis-server-as-a-session-handler-for-php-on-ubuntu-14-04">How to Set Up a Redis Server as a Session Handler for PHP on Ubuntu 14.04</a></p>
</div>
</div>


            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="system_requirements.html" title="Previous Chapter: System Requirements"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; System Requir...</span>
    </a>
  </li>
  <li class="next">
    <a href="deployment_considerations.html" title="Next Chapter: Deployment Considerations"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Deployment Co... &raquo;</span>
    </a>
  </li>
</ul>
					</div>
				</div>
			</div>
  </main>  
  </div>
</div>
  </body>
</html>